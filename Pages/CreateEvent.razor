@page "/create-event"
@using EventEase.Models
@using EventEase.Services
@inject EventService EventService
@inject NavigationManager Navigation

<PageTitle>EventEase - Create Event</PageTitle>

<div class="page-header">
    <h1>Create New Event</h1>
    <p class="subtitle">Add a new event to EventEase</p>
</div>

@if (!string.IsNullOrEmpty(successMessage))
{
    <div class="alert alert-success">@successMessage</div>
}

<div class="form-container">
    <EditForm Model="@newEvent" OnValidSubmit="HandleCreate">
        <DataAnnotationsValidator />

        <div class="form-group">
            <label for="title">Event Title</label>
            <InputText id="title" @bind-Value="newEvent.Title" class="form-control" placeholder="Enter event title" />
            <ValidationMessage For="@(() => newEvent.Title)" />
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <InputTextArea id="description" @bind-Value="newEvent.Description" class="form-control" rows="3" placeholder="Describe the event" />
            <ValidationMessage For="@(() => newEvent.Description)" />
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <InputDate id="date" @bind-Value="newEvent.Date" class="form-control" />
            <ValidationMessage For="@(() => newEvent.Date)" />
        </div>

        <div class="form-group">
            <label for="location">Location</label>
            <InputText id="location" @bind-Value="newEvent.Location" class="form-control" placeholder="Event location" />
            <ValidationMessage For="@(() => newEvent.Location)" />
        </div>

        <div class="form-group">
            <label for="capacity">Max Capacity</label>
            <InputNumber id="capacity" @bind-Value="newEvent.MaxCapacity" class="form-control" />
            <ValidationMessage For="@(() => newEvent.MaxCapacity)" />
        </div>

        <button type="submit" class="btn btn-primary">Create Event</button>

        <ValidationSummary />
    </EditForm>
</div>

@code {
    private EventModel newEvent = new();
    private string successMessage = string.Empty;

    private void HandleCreate()
    {
        EventService.AddEvent(newEvent);
        successMessage = $"Event '{newEvent.Title}' created successfully!";
        newEvent = new EventModel();
    }
}
